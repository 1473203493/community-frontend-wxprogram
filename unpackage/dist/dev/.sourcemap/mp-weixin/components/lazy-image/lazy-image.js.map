{"version":3,"file":"lazy-image.js","sources":["components/lazy-image/lazy-image.vue","../../../HBuilderX.4.87.2025121004/HBuilderX/plugins/uniapp-cli-vite/uniComponent:/QzovVXNlcnMvRm9vbGVyL0Rlc2t0b3AvTXVsdGlDb21tdW5pdHlBcHBsaWNhdGlvbi9zc3MvY29tbXVuaXR5LWZyb250ZW5kLXd4cHJvZ3JhbS9jb21wb25lbnRzL2xhenktaW1hZ2UvbGF6eS1pbWFnZS52dWU"],"sourcesContent":["<template>\n  <view class=\"lazy-image-container\">\n    <image \n      v-if=\"show\" \n      :src=\"src\" \n      :mode=\"mode\" \n      :style=\"imageStyle\"\n      class=\"lazy-image\"\n      @load=\"onLoad\"\n      @error=\"onError\"\n    ></image>\n    <image \n      v-else \n      src=\"/static/student/placeholder.png\" \n      :mode=\"mode\" \n      :style=\"imageStyle\"\n      class=\"lazy-image\"\n    ></image>\n  </view>\n</template>\n\n<script>\nexport default {\n  name: 'lazy-image',\n  props: {\n    src: {\n      type: String,\n      required: true\n    },\n    mode: {\n      type: String,\n      default: 'aspectFill'\n    },\n    delay: {\n      type: Number,\n      default: 0\n    },\n    width: {\n      type: [String, Number],\n      default: 'auto'\n    },\n    height: {\n      type: [String, Number],\n      default: 'auto'\n    }\n  },\n  data() {\n    return {\n      show: false,\n      observer: null,\n      timeout: null\n    };\n  },\n  computed: {\n    imageStyle() {\n      return {\n        width: typeof this.width === 'number' ? `${this.width}rpx` : this.width,\n        height: typeof this.height === 'number' ? `${this.height}rpx` : this.height\n      };\n    }\n  },\n  mounted() {\n    if (this.delay > 0) {\n      this.timeout = setTimeout(() => {\n        this.initObserver();\n      }, this.delay);\n    } else {\n      this.initObserver();\n    }\n  },\n  beforeUnmount() {\n    if (this.observer) {\n      this.observer.disconnect();\n    }\n    if (this.timeout) {\n      clearTimeout(this.timeout);\n    }\n  },\n  methods: {\n    // 初始化观察者\n    initObserver() {\n      // 检查是否支持IntersectionObserver\n      if (typeof uni.createIntersectionObserver !== 'function') {\n        // 不支持的话直接显示图片\n        this.show = true;\n        return;\n      }\n\n      this.observer = uni.createIntersectionObserver(this, {\n        thresholds: [0],\n        initialRatio: 0,\n        observeAll: false\n      });\n\n      this.observer.observe('.lazy-image-container', (res) => {\n        if (res.intersectionRatio > 0) {\n          this.show = true;\n          this.observer.disconnect();\n        }\n      });\n    },\n\n    // 图片加载完成\n    onLoad(e) {\n      this.$emit('load', e);\n    },\n\n    // 图片加载失败\n    onError(e) {\n      this.$emit('error', e);\n    }\n  }\n};\n</script>\n\n<style scoped>\n.lazy-image-container {\n  display: inline-block;\n  position: relative;\n  overflow: hidden;\n}\n\n.lazy-image-container .lazy-image {\n  transition: opacity 0.3s ease;\n}\n</style>\n","import Component from 'C:/Users/Fooler/Desktop/MultiCommunityApplication/sss/community-frontend-wxprogram/components/lazy-image/lazy-image.vue'\nwx.createComponent(Component)"],"names":["uni"],"mappings":";;;AAsBA,MAAK,YAAU;AAAA,EACb,MAAM;AAAA,EACN,OAAO;AAAA,IACL,KAAK;AAAA,MACH,MAAM;AAAA,MACN,UAAU;AAAA,IACX;AAAA,IACD,MAAM;AAAA,MACJ,MAAM;AAAA,MACN,SAAS;AAAA,IACV;AAAA,IACD,OAAO;AAAA,MACL,MAAM;AAAA,MACN,SAAS;AAAA,IACV;AAAA,IACD,OAAO;AAAA,MACL,MAAM,CAAC,QAAQ,MAAM;AAAA,MACrB,SAAS;AAAA,IACV;AAAA,IACD,QAAQ;AAAA,MACN,MAAM,CAAC,QAAQ,MAAM;AAAA,MACrB,SAAS;AAAA,IACX;AAAA,EACD;AAAA,EACD,OAAO;AACL,WAAO;AAAA,MACL,MAAM;AAAA,MACN,UAAU;AAAA,MACV,SAAS;AAAA;EAEZ;AAAA,EACD,UAAU;AAAA,IACR,aAAa;AACX,aAAO;AAAA,QACL,OAAO,OAAO,KAAK,UAAU,WAAW,GAAG,KAAK,KAAK,QAAQ,KAAK;AAAA,QAClE,QAAQ,OAAO,KAAK,WAAW,WAAW,GAAG,KAAK,MAAM,QAAQ,KAAK;AAAA;IAEzE;AAAA,EACD;AAAA,EACD,UAAU;AACR,QAAI,KAAK,QAAQ,GAAG;AAClB,WAAK,UAAU,WAAW,MAAM;AAC9B,aAAK,aAAY;AAAA,SAChB,KAAK,KAAK;AAAA,WACR;AACL,WAAK,aAAY;AAAA,IACnB;AAAA,EACD;AAAA,EACD,gBAAgB;AACd,QAAI,KAAK,UAAU;AACjB,WAAK,SAAS;IAChB;AACA,QAAI,KAAK,SAAS;AAChB,mBAAa,KAAK,OAAO;AAAA,IAC3B;AAAA,EACD;AAAA,EACD,SAAS;AAAA;AAAA,IAEP,eAAe;AAEb,UAAI,OAAOA,cAAAA,MAAI,+BAA+B,YAAY;AAExD,aAAK,OAAO;AACZ;AAAA,MACF;AAEA,WAAK,WAAWA,oBAAI,2BAA2B,MAAM;AAAA,QACnD,YAAY,CAAC,CAAC;AAAA,QACd,cAAc;AAAA,QACd,YAAY;AAAA,MACd,CAAC;AAED,WAAK,SAAS,QAAQ,yBAAyB,CAAC,QAAQ;AACtD,YAAI,IAAI,oBAAoB,GAAG;AAC7B,eAAK,OAAO;AACZ,eAAK,SAAS;QAChB;AAAA,MACF,CAAC;AAAA,IACF;AAAA;AAAA,IAGD,OAAO,GAAG;AACR,WAAK,MAAM,QAAQ,CAAC;AAAA,IACrB;AAAA;AAAA,IAGD,QAAQ,GAAG;AACT,WAAK,MAAM,SAAS,CAAC;AAAA,IACvB;AAAA,EACF;AACF;;;;;;;;;;;;;;;;;AC/GA,GAAG,gBAAgB,SAAS;"}