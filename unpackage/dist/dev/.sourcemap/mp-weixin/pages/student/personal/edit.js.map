{"version":3,"file":"edit.js","sources":["pages/student/personal/edit.vue","../../../HBuilderX.4.87.2025121004/HBuilderX/plugins/uniapp-cli-vite/uniPage:/cGFnZXMvc3R1ZGVudC9wZXJzb25hbC9lZGl0LnZ1ZQ"],"sourcesContent":["<template>\n  <view class=\"edit-container\">\n    <view class=\"form-container\">\n      <view class=\"form-item\">\n        <text class=\"label\">姓名</text>\n        <input \n          type=\"text\" \n          v-model=\"userInfo.name\" \n          placeholder=\"请输入姓名\" \n          class=\"input\"\n        />\n      </view>\n      \n      <view class=\"form-item\">\n        <text class=\"label\">学号</text>\n        <input \n          type=\"text\" \n          v-model=\"userInfo.studentId\" \n          placeholder=\"请输入学号\" \n          class=\"input\"\n          disabled\n        />\n      </view>\n      \n      <view class=\"form-item\">\n        <text class=\"label\">性别</text>\n        <view class=\"gender-select\">\n          <radio-group @change=\"onGenderChange\">\n            <label>\n              <radio :value=\"'male'\" :checked=\"userInfo.gender === 'male'\" />男\n            </label>\n            <label>\n              <radio :value=\"'female'\" :checked=\"userInfo.gender === 'female'\" />女\n            </label>\n          </radio-group>\n        </view>\n      </view>\n      \n      <view class=\"form-item\">\n        <text class=\"label\">邮箱</text>\n        <input \n          type=\"text\" \n          v-model=\"userInfo.email\" \n          placeholder=\"请输入邮箱\" \n          class=\"input\"\n        />\n      </view>\n      \n      <button \n        class=\"submit-btn\" \n        @click=\"saveChanges\"\n        :disabled=\"!canSubmit\"\n      >\n        保存修改\n      </button>\n    </view>\n  </view>\n</template>\n\n<script>\nimport authApi from '@/api/student/auth';\n\nexport default {\n  data() {\n    return {\n      userInfo: {\n        name: '',\n        studentId: '',\n        gender: 'male',\n        email: ''\n      }\n    };\n  },\n  computed: {\n    canSubmit() {\n      return this.userInfo.name && this.userInfo.studentId && this.userInfo.email;\n    }\n  },\n  onLoad() {\n    this.loadUserInfo();\n  },\n  methods: {\n    async loadUserInfo() {\n      try {\n        // 这里应该从API获取用户信息，暂时使用本地存储\n        const userInfo = uni.getStorageSync('userInfo');\n        if (userInfo) {\n          this.userInfo = { ...this.userInfo, ...userInfo };\n        }\n      } catch (error) {\n        console.error('加载用户信息失败', error);\n      }\n    },\n    onGenderChange(e) {\n      this.userInfo.gender = e.detail.value;\n    },\n    \n    async saveChanges() {\n      try {\n        await authApi.updateUserInfo(this.userInfo);\n        \n        // 更新本地存储\n        uni.setStorageSync('userInfo', this.userInfo);\n        \n        uni.showToast({\n          title: '信息更新成功',\n          icon: 'success'\n        });\n        \n        setTimeout(() => {\n          uni.navigateBack();\n        }, 1500);\n      } catch (error) {\n        uni.showToast({\n          title: error.message || '信息更新失败',\n          icon: 'none'\n        });\n      }\n    }\n  }\n};\n</script>\n\n<style scoped>\n.edit-container {\n  min-height: 100vh;\n  background-color: #f5f5f5;\n  padding: 20rpx;\n}\n\n.form-container {\n  background-color: #fff;\n  border-radius: 10rpx;\n  padding: 20rpx;\n}\n\n.form-item {\n  margin-bottom: 30rpx;\n}\n\n.label {\n  display: block;\n  font-size: 28rpx;\n  color: #333;\n  margin-bottom: 10rpx;\n}\n\n.input {\n  width: 100%;\n  height: 80rpx;\n  border: 1rpx solid #e0e0e0;\n  border-radius: 5rpx;\n  padding: 0 20rpx;\n  font-size: 28rpx;\n  box-sizing: border-box;\n}\n\n.gender-select {\n  padding: 20rpx 0;\n}\n\n.gender-select label {\n  margin-right: 40rpx;\n  font-size: 28rpx;\n}\n\n.submit-btn {\n  width: 100%;\n  height: 80rpx;\n  background-color: #007aff;\n  color: #fff;\n  border: none;\n  border-radius: 5rpx;\n  font-size: 32rpx;\n  margin-top: 20rpx;\n}\n\n.submit-btn:disabled {\n  background-color: #ccc;\n}\n</style>","import MiniProgramPage from 'C:/Users/Fooler/Desktop/MultiCommunityApplication/sss/community-frontend-wxprogram/pages/student/personal/edit.vue'\nwx.createPage(MiniProgramPage)"],"names":["uni","authApi"],"mappings":";;;AA8DA,MAAK,YAAU;AAAA,EACb,OAAO;AACL,WAAO;AAAA,MACL,UAAU;AAAA,QACR,MAAM;AAAA,QACN,WAAW;AAAA,QACX,QAAQ;AAAA,QACR,OAAO;AAAA,MACT;AAAA;EAEH;AAAA,EACD,UAAU;AAAA,IACR,YAAY;AACV,aAAO,KAAK,SAAS,QAAQ,KAAK,SAAS,aAAa,KAAK,SAAS;AAAA,IACxE;AAAA,EACD;AAAA,EACD,SAAS;AACP,SAAK,aAAY;AAAA,EAClB;AAAA,EACD,SAAS;AAAA,IACP,MAAM,eAAe;AACnB,UAAI;AAEF,cAAM,WAAWA,cAAAA,MAAI,eAAe,UAAU;AAC9C,YAAI,UAAU;AACZ,eAAK,WAAW,EAAE,GAAG,KAAK,UAAU,GAAG;QACzC;AAAA,MACA,SAAO,OAAO;AACdA,sBAAc,MAAA,MAAA,SAAA,yCAAA,YAAY,KAAK;AAAA,MACjC;AAAA,IACD;AAAA,IACD,eAAe,GAAG;AAChB,WAAK,SAAS,SAAS,EAAE,OAAO;AAAA,IACjC;AAAA,IAED,MAAM,cAAc;AAClB,UAAI;AACF,cAAMC,yBAAQ,eAAe,KAAK,QAAQ;AAG1CD,sBAAAA,MAAI,eAAe,YAAY,KAAK,QAAQ;AAE5CA,sBAAAA,MAAI,UAAU;AAAA,UACZ,OAAO;AAAA,UACP,MAAM;AAAA,QACR,CAAC;AAED,mBAAW,MAAM;AACfA,wBAAG,MAAC,aAAY;AAAA,QACjB,GAAE,IAAI;AAAA,MACP,SAAO,OAAO;AACdA,sBAAAA,MAAI,UAAU;AAAA,UACZ,OAAO,MAAM,WAAW;AAAA,UACxB,MAAM;AAAA,QACR,CAAC;AAAA,MACH;AAAA,IACF;AAAA,EACF;AACF;;;;;;;;;;;;;;;;;ACvHA,GAAG,WAAW,eAAe;"}