{"version":3,"file":"detail.js","sources":["pages/student/club/detail.vue","../../../HBuilderX.4.87.2025121004/HBuilderX/plugins/uniapp-cli-vite/uniPage:/cGFnZXMvc3R1ZGVudC9jbHViL2RldGFpbC52dWU"],"sourcesContent":["<template>\n  <view class=\"club-detail-container\">\n    <!-- 社团基本信息 -->\n    <view class=\"club-header\">\n      <lazy-image :src=\"clubDetail.logo || '/static/student/default-club.png'\" mode=\"aspectFill\"></lazy-image>\n      <view class=\"club-info\">\n        <text class=\"club-name\">{{ clubDetail.name }}</text>\n        <text class=\"club-category\">{{ clubDetail.category || '未分类' }}</text>\n        <text class=\"club-member\">{{ clubDetail.memberCount }}人已加入</text>\n      </view>\n    </view>\n\n    <!-- 社团简介 -->\n    <view class=\"section\">\n      <view class=\"section-title\">社团简介</view>\n      <view class=\"section-content\">\n        <text>{{ clubDetail.description || '该社团暂无简介' }}</text>\n      </view>\n    </view>\n\n    <!-- 社团负责人 -->\n    <view class=\"section\">\n      <view class=\"section-title\">社团负责人</view>\n      <view class=\"section-content\">\n        <view class=\"manager-info\">\n          <lazy-image :src=\"clubDetail.managerAvatar || '/static/student/default-avatar.png'\" mode=\"aspectFill\"></lazy-image>\n          <view class=\"manager-detail\">\n            <text class=\"manager-name\">{{ clubDetail.managerName || '未知' }}</text>\n            <text class=\"manager-role\">社长</text>\n          </view>\n        </view>\n      </view>\n    </view>\n\n    <!-- 近期活动 -->\n    <view class=\"section\">\n      <view class=\"section-title\">近期活动</view>\n      <view class=\"section-content\">\n        <view \n          v-for=\"activity in clubDetail.recentActivities\" \n          :key=\"activity.id\"\n          class=\"activity-item\"\n          @tap=\"goToActivityDetail(activity.id)\"\n        >\n          <text class=\"activity-title\">{{ activity.title }}</text>\n          <text class=\"activity-time\">{{ formatDate(activity.startTime) }}</text>\n        </view>\n        <view v-if=\"!clubDetail.recentActivities || clubDetail.recentActivities.length === 0\" class=\"empty-activities\">\n          <text>该社团暂无活动</text>\n        </view>\n      </view>\n    </view>\n\n    <!-- 底部操作栏 -->\n    <view class=\"bottom-bar\">\n      <button \n        v-if=\"!isJoined\" \n        class=\"join-btn\" \n        @click=\"applyToJoinClub\"\n      >\n        申请加入\n      </button>\n      <button \n        v-else \n        class=\"joined-btn\" \n        disabled\n      >\n        已加入\n      </button>\n    </view>\n  </view>\n</template>\n\n<script>\nimport { clubApi } from '../../../api/student/club.js';\nimport lazyImage from '../../../components/lazy-image/lazy-image.vue';\n\nexport default {\n  components: {\n    lazyImage\n  },\n  data() {\n    return {\n      clubId: '',\n      clubDetail: {},\n      isJoined: false // 是否已加入社团\n    };\n  },\n  onLoad(options) {\n    this.clubId = options.id;\n    this.loadClubDetail();\n  },\n  methods: {\n    // 加载社团详情\n    async loadClubDetail() {\n      uni.showLoading({ title: '加载中' });\n      try {\n        const res = await clubApi.getClubDetail(this.clubId);\n        console.log('【社团详情请求结果】', res);\n        if (res.success) {\n          this.clubDetail = res.data;\n          // 判断用户是否已加入该社团\n          this.isJoined = res.data?.isJoined ?? false;\n        } else {\n          uni.showToast({ title: res.message || '加载失败', icon: 'none' });\n        }\n      } catch (error) {\n        console.error('加载社团详情失败:', error);\n        uni.showToast({ title: '网络错误', icon: 'none' });\n      } finally {\n        uni.hideLoading();\n      }\n    },\n    \n    // 申请加入社团\n    async applyToJoinClub() {\n      try {\n        // 可以添加备注输入框\n        const remark = '';\n        const res = await clubApi.applyToJoinClub(this.clubId, remark);\n        if (res.code === 200) {\n          uni.showToast({ title: '申请提交成功，请等待审核', icon: 'success' });\n        } else {\n          uni.showToast({ title: res.message || '申请失败', icon: 'none' });\n        }\n      } catch (error) {\n        console.error('申请加入社团失败:', error);\n        uni.showToast({ title: '网络错误', icon: 'none' });\n      }\n    },\n    \n    // 跳转到活动详情\n    goToActivityDetail(activityId) {\n      uni.navigateTo({\n        url: `/pages/student/activity/detail?id=${activityId}`\n      });\n    },\n    \n    // 格式化日期\n    formatDate(dateStr) {\n      if (!dateStr) return '';\n      const date = new Date(dateStr);\n      return `${date.getFullYear()}-${(date.getMonth() + 1).toString().padStart(2, '0')}-${date.getDate().toString().padStart(2, '0')}`;\n    }\n  }\n};\n</script>\n\n<style scoped>\n.club-detail-container {\n  min-height: 100vh;\n  background-color: #f5f5f5;\n}\n\n/* 社团头部信息 */\n.club-header {\n  padding: 20rpx;\n  background-color: #fff;\n  display: flex;\n  align-items: center;\n}\n\n.club-header image {\n  width: 160rpx;\n  height: 160rpx;\n  border-radius: 10rpx;\n}\n\n.club-info {\n  margin-left: 20rpx;\n  flex: 1;\n}\n\n.club-name {\n  display: block;\n  font-size: 36rpx;\n  font-weight: bold;\n  color: #333;\n}\n\n.club-category {\n  display: block;\n  margin-top: 10rpx;\n  font-size: 26rpx;\n  color: #666;\n}\n\n.club-member {\n  display: block;\n  margin-top: 10rpx;\n  font-size: 24rpx;\n  color: #999;\n}\n\n/* 通用区块样式 */\n.section {\n  margin-top: 20rpx;\n  padding: 0 20rpx;\n  background-color: #fff;\n}\n\n.section-title {\n  padding: 20rpx 0;\n  font-size: 30rpx;\n  font-weight: bold;\n  color: #333;\n  border-bottom: 1rpx solid #eee;\n}\n\n.section-content {\n  padding: 20rpx 0;\n}\n\n.section-content text {\n  font-size: 28rpx;\n  color: #666;\n  line-height: 40rpx;\n}\n\n/* 负责人信息 */\n.manager-info {\n  display: flex;\n  align-items: center;\n}\n\n.manager-info image {\n  width: 80rpx;\n  height: 80rpx;\n  border-radius: 50%;\n}\n\n.manager-detail {\n  margin-left: 20rpx;\n}\n\n.manager-name {\n  display: block;\n  font-size: 28rpx;\n  color: #333;\n}\n\n.manager-role {\n  display: block;\n  margin-top: 5rpx;\n  font-size: 24rpx;\n  color: #999;\n}\n\n/* 近期活动 */\n.activity-item {\n  padding: 20rpx 0;\n  border-bottom: 1rpx solid #f0f0f0;\n}\n\n.activity-item:last-child {\n  border-bottom: none;\n}\n\n.activity-title {\n  display: block;\n  font-size: 28rpx;\n  color: #333;\n  margin-bottom: 10rpx;\n}\n\n.activity-time {\n  display: block;\n  font-size: 24rpx;\n  color: #999;\n}\n\n.empty-activities {\n  padding: 40rpx 0;\n  text-align: center;\n}\n\n.empty-activities text {\n  font-size: 26rpx;\n  color: #999;\n}\n\n/* 底部操作栏 */\n.bottom-bar {\n  position: fixed;\n  bottom: 0;\n  left: 0;\n  right: 0;\n  padding: 20rpx;\n  background-color: #fff;\n  border-top: 1rpx solid #eee;\n  display: flex;\n  justify-content: center;\n}\n\n.join-btn {\n  width: 100%;\n  height: 80rpx;\n  font-size: 30rpx;\n  color: #fff;\n  background-color: #007aff;\n  border-radius: 40rpx;\n}\n\n.joined-btn {\n  width: 100%;\n  height: 80rpx;\n  font-size: 30rpx;\n  color: #999;\n  background-color: #f5f5f5;\n  border-radius: 40rpx;\n}\n</style>\n","import MiniProgramPage from 'C:/Users/Fooler/Desktop/MultiCommunityApplication/sss/community-frontend-wxprogram/pages/student/club/detail.vue'\nwx.createPage(MiniProgramPage)"],"names":["uni","clubApi"],"mappings":";;;AA2EA,MAAO,YAAW,MAAW;AAE7B,MAAK,YAAU;AAAA,EACb,YAAY;AAAA,IACV;AAAA,EACD;AAAA,EACD,OAAO;AACL,WAAO;AAAA,MACL,QAAQ;AAAA,MACR,YAAY,CAAE;AAAA,MACd,UAAU;AAAA;AAAA;EAEb;AAAA,EACD,OAAO,SAAS;AACd,SAAK,SAAS,QAAQ;AACtB,SAAK,eAAc;AAAA,EACpB;AAAA,EACD,SAAS;AAAA;AAAA,IAEP,MAAM,iBAAiB;;AACrBA,oBAAAA,MAAI,YAAY,EAAE,OAAO,MAAO,CAAA;AAChC,UAAI;AACF,cAAM,MAAM,MAAMC,iBAAO,QAAC,cAAc,KAAK,MAAM;AACnDD,sBAAY,MAAA,MAAA,OAAA,uCAAA,cAAc,GAAG;AAC7B,YAAI,IAAI,SAAS;AACf,eAAK,aAAa,IAAI;AAEtB,eAAK,aAAW,SAAI,SAAJ,mBAAU,aAAY;AAAA,eACjC;AACLA,8BAAI,UAAU,EAAE,OAAO,IAAI,WAAW,QAAQ,MAAM,OAAO,CAAC;AAAA,QAC9D;AAAA,MACA,SAAO,OAAO;AACdA,sBAAc,MAAA,MAAA,SAAA,wCAAA,aAAa,KAAK;AAChCA,sBAAG,MAAC,UAAU,EAAE,OAAO,QAAQ,MAAM,OAAK,CAAG;AAAA,MAC/C,UAAU;AACRA,sBAAG,MAAC,YAAW;AAAA,MACjB;AAAA,IACD;AAAA;AAAA,IAGD,MAAM,kBAAkB;AACtB,UAAI;AAEF,cAAM,SAAS;AACf,cAAM,MAAM,MAAMC,yBAAQ,gBAAgB,KAAK,QAAQ,MAAM;AAC7D,YAAI,IAAI,SAAS,KAAK;AACpBD,wBAAG,MAAC,UAAU,EAAE,OAAO,gBAAgB,MAAM,UAAU,CAAC;AAAA,eACnD;AACLA,8BAAI,UAAU,EAAE,OAAO,IAAI,WAAW,QAAQ,MAAM,OAAO,CAAC;AAAA,QAC9D;AAAA,MACA,SAAO,OAAO;AACdA,sBAAc,MAAA,MAAA,SAAA,wCAAA,aAAa,KAAK;AAChCA,sBAAG,MAAC,UAAU,EAAE,OAAO,QAAQ,MAAM,OAAK,CAAG;AAAA,MAC/C;AAAA,IACD;AAAA;AAAA,IAGD,mBAAmB,YAAY;AAC7BA,oBAAAA,MAAI,WAAW;AAAA,QACb,KAAK,qCAAqC,UAAU;AAAA,MACtD,CAAC;AAAA,IACF;AAAA;AAAA,IAGD,WAAW,SAAS;AAClB,UAAI,CAAC;AAAS,eAAO;AACrB,YAAM,OAAO,IAAI,KAAK,OAAO;AAC7B,aAAO,GAAG,KAAK,YAAW,CAAE,KAAK,KAAK,SAAW,IAAE,GAAG,SAAU,EAAC,SAAS,GAAG,GAAG,CAAC,IAAI,KAAK,QAAS,EAAC,SAAU,EAAC,SAAS,GAAG,GAAG,CAAC;AAAA,IACjI;AAAA,EACF;AACF;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AChJA,GAAG,WAAW,eAAe;"}