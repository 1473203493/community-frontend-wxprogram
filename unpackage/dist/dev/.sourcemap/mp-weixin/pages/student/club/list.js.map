{"version":3,"file":"list.js","sources":["pages/student/club/list.vue","../../../HBuilderX.4.87.2025121004/HBuilderX/plugins/uniapp-cli-vite/uniPage:/cGFnZXMvc3R1ZGVudC9jbHViL2xpc3QudnVl"],"sourcesContent":["<template>\n  <view class=\"club-list-container\">\n    <!-- 搜索框 -->\n    <view class=\"search-container\">\n      <view class=\"search-box\">\n        <uni-icons type=\"search\" size=\"18\" color=\"#999\"></uni-icons>\n        <input type=\"text\" v-model=\"searchParams.name\" placeholder=\"搜索社团名称\" placeholder-class=\"placeholder\" @input=\"onSearch\" />\n      </view>\n    </view>\n\n    <!-- 筛选条件 -->\n    <view class=\"filter-container\">\n      <view class=\"filter-group\">\n        <text class=\"filter-label\">类别：</text>\n        <view class=\"filter-options\">\n          <view \n            v-for=\"category in categories\" \n            :key=\"category.value\"\n            :class=\"['filter-option', { active: searchParams.category === category.value }]\"\n            @tap=\"onCategoryChange(category.value)\"\n          >\n            {{ category.label }}\n          </view>\n        </view>\n      </view>\n\n      <view class=\"filter-group\">\n        <text class=\"filter-label\">排序：</text>\n        <view class=\"filter-options\">\n          <view \n            :class=\"['filter-option', { active: searchParams.sort === 'newest' }]\"\n            @tap=\"onSortChange('newest')\"\n          >\n            最新\n          </view>\n          <view \n            :class=\"['filter-option', { active: searchParams.sort === 'hot' }]\"\n            @tap=\"onSortChange('hot')\"\n          >\n            热门\n          </view>\n        </view>\n      </view>\n    </view>\n\n    <!-- 骨架屏 -->\n    <skeleton \n      v-if=\"isLoading\" \n      :is-loading=\"true\" \n      :show-list=\"true\" \n      :list-count=\"10\"\n    ></skeleton>\n\n    <!-- 社团列表 -->\n    <view v-else-if=\"clubList.length > 0\" class=\"club-list\">\n      <view \n        v-for=\"club in clubList\" \n        :key=\"club.id\"\n        class=\"club-item\"\n        @tap=\"goToClubDetail(club.id)\"\n      >\n        <image :src=\"club.logo || '/static/student/default-club.png'\" mode=\"aspectFill\"></image>\n        <view class=\"club-info\">\n          <view class=\"club-header\">\n            <text class=\"club-name\">{{ club.name }}</text>\n            <text class=\"club-category\">{{ getCategoryLabel(club.category) }}</text>\n          </view>\n          <text class=\"club-description\">{{ club.description || '该社团暂无描述' }}</text>\n          <view class=\"club-stats\">\n            <text class=\"stat-item\">{{ club.memberCount }}人</text>\n            <text class=\"stat-item\">{{ club.activityCount }}个活动</text>\n          </view>\n        </view>\n      </view>\n    </view>\n\n    <!-- 空状态 -->\n    <view v-else class=\"empty\">\n      <uni-icons type=\"info\" size=\"60\" color=\"#ccc\"></uni-icons>\n      <text>暂无社团数据</text>\n    </view>\n\n    <!-- 分页 -->\n    <uni-pagination \n      v-if=\"total > 0 && !isLoading\" \n      :current=\"searchParams.page\" \n      :page-size=\"searchParams.limit\" \n      :total=\"total\" \n      @change=\"onPageChange\"\n      mode=\"number\"\n      prev-text=\"上一页\"\n      next-text=\"下一页\"\n    ></uni-pagination>\n  </view>\n</template>\n\n<script>\nimport { clubApi } from '../../../api/student/club.js';\nimport skeleton from '../../../components/skeleton/skeleton.vue';\n\nexport default {\n  components: {\n    skeleton\n  },\n  data() {\n    return {\n      searchParams: {\n        name: '',\n        category: '',\n        sort: 'newest',\n        page: 1,\n        limit: 10\n      },\n      clubList: [],\n      total: 0,\n      isLoading: true,\n      categories: [\n        { label: '全部', value: '' },\n        { label: '学术科技', value: 'academic' },\n        { label: '文化艺术', value: 'cultural' },\n        { label: '体育健身', value: 'sports' },\n        { label: '公益实践', value: 'public' },\n        { label: '兴趣爱好', value: 'hobby' }\n      ]\n    };\n  },\n  onLoad() {\n    this.loadClubList();\n  },\n  methods: {\n    // 加载社团列表\n    async loadClubList() {\n      this.isLoading = true;\n      try {\n        const res = await clubApi.getClubList(this.searchParams);\n        if (res.code === 200) {\n          this.clubList = res.data.list || [];\n          this.total = res.data.total || 0;\n        } else {\n          uni.showToast({ title: res.message || '加载失败', icon: 'none' });\n        }\n      } catch (error) {\n        console.error('加载社团列表失败:', error);\n        uni.showToast({ title: '网络错误', icon: 'none' });\n      } finally {\n        this.isLoading = false;\n      }\n    },\n    \n    // 搜索\n    onSearch() {\n      this.searchParams.page = 1;\n      this.loadClubList();\n    },\n    \n    // 类别筛选\n    onCategoryChange(category) {\n      this.searchParams.category = category;\n      this.searchParams.page = 1;\n      this.loadClubList();\n    },\n    \n    // 排序切换\n    onSortChange(sort) {\n      this.searchParams.sort = sort;\n      this.searchParams.page = 1;\n      this.loadClubList();\n    },\n    \n    // 分页切换\n    onPageChange(page) {\n      this.searchParams.page = page;\n      this.loadClubList();\n    },\n    \n    // 跳转到社团详情\n    goToClubDetail(clubId) {\n      uni.navigateTo({\n        url: `/pages/student/club/detail?id=${clubId}`\n      });\n    },\n    \n    // 获取类别显示名称\n    getCategoryLabel(value) {\n      const category = this.categories.find(c => c.value === value);\n      return category ? category.label : value;\n    }\n  }\n};\n</script>\n\n<style scoped>\n.club-list-container {\n  padding-bottom: 20rpx;\n}\n\n/* 搜索框 */\n.search-container {\n  padding: 20rpx;\n  background-color: #fff;\n}\n\n.search-box {\n  display: flex;\n  align-items: center;\n  padding: 12rpx 20rpx;\n  background-color: #f5f5f5;\n  border-radius: 40rpx;\n}\n\n.search-box input {\n  margin-left: 10rpx;\n  font-size: 28rpx;\n  color: #333;\n}\n\n.placeholder {\n  color: #999;\n}\n\n/* 筛选条件 */\n.filter-container {\n  padding: 20rpx;\n  background-color: #fff;\n  border-bottom: 1rpx solid #eee;\n}\n\n.filter-group {\n  margin-bottom: 20rpx;\n}\n\n.filter-label {\n  font-size: 28rpx;\n  color: #666;\n}\n\n.filter-options {\n  display: flex;\n  flex-wrap: wrap;\n  margin-top: 10rpx;\n}\n\n.filter-option {\n  padding: 8rpx 20rpx;\n  margin-right: 20rpx;\n  margin-bottom: 10rpx;\n  font-size: 26rpx;\n  color: #666;\n  background-color: #f5f5f5;\n  border-radius: 20rpx;\n}\n\n.filter-option.active {\n  color: #fff;\n  background-color: #007aff;\n}\n\n/* 社团列表 */\n.club-list {\n  background-color: #fff;\n}\n\n.club-item {\n  display: flex;\n  padding: 20rpx;\n  margin-bottom: 20rpx;\n  background-color: #fff;\n  border-radius: 10rpx;\n  box-shadow: 0 2rpx 10rpx rgba(0, 0, 0, 0.1);\n  /* 增加点击区域 */\n  border: 2rpx solid transparent;\n}\n\n.club-item:active {\n  border-color: #007aff;\n  background-color: rgba(0, 122, 255, 0.05);\n}\n\n.club-item image {\n  width: 160rpx;\n  height: 160rpx;\n  border-radius: 10rpx;\n}\n\n.club-info {\n  flex: 1;\n  margin-left: 20rpx;\n  display: flex;\n  flex-direction: column;\n  justify-content: space-between;\n}\n\n.club-header {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n}\n\n.club-name {\n  font-size: 32rpx;\n  font-weight: bold;\n  color: #333;\n}\n\n.club-category {\n  padding: 4rpx 12rpx;\n  font-size: 22rpx;\n  color: #fff;\n  background-color: #007aff;\n  border-radius: 10rpx;\n}\n\n.club-description {\n  margin-top: 10rpx;\n  font-size: 26rpx;\n  color: #666;\n  line-height: 36rpx;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  display: -webkit-box;\n  -webkit-line-clamp: 2;\n  -webkit-box-orient: vertical;\n}\n\n.club-stats {\n  margin-top: 10rpx;\n  display: flex;\n}\n\n.stat-item {\n  margin-right: 30rpx;\n  font-size: 24rpx;\n  color: #999;\n}\n\n/* 空状态 */\n.empty {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  padding: 100rpx 0;\n}\n\n.empty text {\n  margin-top: 20rpx;\n  font-size: 28rpx;\n  color: #999;\n}\n\n/* 分页 */\nuni-pagination {\n  margin: 40rpx 0;\n}\n</style>\n","import MiniProgramPage from 'C:/Users/Fooler/Desktop/MultiCommunityApplication/sss/community-frontend-wxprogram/pages/student/club/list.vue'\nwx.createPage(MiniProgramPage)"],"names":["clubApi","uni"],"mappings":";;;AAkGA,MAAK,WAAY,MAAW;AAE5B,MAAK,YAAU;AAAA,EACb,YAAY;AAAA,IACV;AAAA,EACD;AAAA,EACD,OAAO;AACL,WAAO;AAAA,MACL,cAAc;AAAA,QACZ,MAAM;AAAA,QACN,UAAU;AAAA,QACV,MAAM;AAAA,QACN,MAAM;AAAA,QACN,OAAO;AAAA,MACR;AAAA,MACD,UAAU,CAAE;AAAA,MACZ,OAAO;AAAA,MACP,WAAW;AAAA,MACX,YAAY;AAAA,QACV,EAAE,OAAO,MAAM,OAAO,GAAI;AAAA,QAC1B,EAAE,OAAO,QAAQ,OAAO,WAAY;AAAA,QACpC,EAAE,OAAO,QAAQ,OAAO,WAAY;AAAA,QACpC,EAAE,OAAO,QAAQ,OAAO,SAAU;AAAA,QAClC,EAAE,OAAO,QAAQ,OAAO,SAAU;AAAA,QAClC,EAAE,OAAO,QAAQ,OAAO,QAAQ;AAAA,MAClC;AAAA;EAEH;AAAA,EACD,SAAS;AACP,SAAK,aAAY;AAAA,EAClB;AAAA,EACD,SAAS;AAAA;AAAA,IAEP,MAAM,eAAe;AACnB,WAAK,YAAY;AACjB,UAAI;AACF,cAAM,MAAM,MAAMA,iBAAO,QAAC,YAAY,KAAK,YAAY;AACvD,YAAI,IAAI,SAAS,KAAK;AACpB,eAAK,WAAW,IAAI,KAAK,QAAQ,CAAA;AACjC,eAAK,QAAQ,IAAI,KAAK,SAAS;AAAA,eAC1B;AACLC,8BAAI,UAAU,EAAE,OAAO,IAAI,WAAW,QAAQ,MAAM,OAAO,CAAC;AAAA,QAC9D;AAAA,MACA,SAAO,OAAO;AACdA,sBAAc,MAAA,MAAA,SAAA,sCAAA,aAAa,KAAK;AAChCA,sBAAG,MAAC,UAAU,EAAE,OAAO,QAAQ,MAAM,OAAK,CAAG;AAAA,MAC/C,UAAU;AACR,aAAK,YAAY;AAAA,MACnB;AAAA,IACD;AAAA;AAAA,IAGD,WAAW;AACT,WAAK,aAAa,OAAO;AACzB,WAAK,aAAY;AAAA,IAClB;AAAA;AAAA,IAGD,iBAAiB,UAAU;AACzB,WAAK,aAAa,WAAW;AAC7B,WAAK,aAAa,OAAO;AACzB,WAAK,aAAY;AAAA,IAClB;AAAA;AAAA,IAGD,aAAa,MAAM;AACjB,WAAK,aAAa,OAAO;AACzB,WAAK,aAAa,OAAO;AACzB,WAAK,aAAY;AAAA,IAClB;AAAA;AAAA,IAGD,aAAa,MAAM;AACjB,WAAK,aAAa,OAAO;AACzB,WAAK,aAAY;AAAA,IAClB;AAAA;AAAA,IAGD,eAAe,QAAQ;AACrBA,oBAAAA,MAAI,WAAW;AAAA,QACb,KAAK,iCAAiC,MAAM;AAAA,MAC9C,CAAC;AAAA,IACF;AAAA;AAAA,IAGD,iBAAiB,OAAO;AACtB,YAAM,WAAW,KAAK,WAAW,KAAK,OAAK,EAAE,UAAU,KAAK;AAC5D,aAAO,WAAW,SAAS,QAAQ;AAAA,IACrC;AAAA,EACF;AACF;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AC3LA,GAAG,WAAW,eAAe;"}